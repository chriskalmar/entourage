<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Entourage</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/entourage/assets/css/0.styles.070be6d0.css" as="style"><link rel="preload" href="/entourage/assets/js/app.4735b54c.js" as="script"><link rel="preload" href="/entourage/assets/js/2.a00bb63a.js" as="script"><link rel="preload" href="/entourage/assets/js/8.db8de4f1.js" as="script"><link rel="prefetch" href="/entourage/assets/js/3.7a41b788.js"><link rel="prefetch" href="/entourage/assets/js/4.5f60d4ea.js"><link rel="prefetch" href="/entourage/assets/js/5.153b7d28.js"><link rel="prefetch" href="/entourage/assets/js/6.8129d006.js"><link rel="prefetch" href="/entourage/assets/js/7.46754830.js"><link rel="prefetch" href="/entourage/assets/js/9.f7a5189e.js">
    <link rel="stylesheet" href="/entourage/assets/css/0.styles.070be6d0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/entourage/" class="home-link router-link-active"><img src="/entourage/entourage-logo.png" alt="Entourage" class="logo"> <span class="site-name can-hide">Entourage</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/entourage/readme/" class="nav-link">
  Readme
</a></div><div class="nav-item"><a href="/entourage/server/" class="nav-link router-link-exact-active router-link-active">
  Server
</a></div><div class="nav-item"><a href="/entourage/cli/" class="nav-link">
  CLI
</a></div> <a href="https://github.com/chriskalmar/entourage" target="_blank" rel="noopener noreferrer" class="repo-link">
    Git
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/entourage/readme/" class="nav-link">
  Readme
</a></div><div class="nav-item"><a href="/entourage/server/" class="nav-link router-link-exact-active router-link-active">
  Server
</a></div><div class="nav-item"><a href="/entourage/cli/" class="nav-link">
  CLI
</a></div> <a href="https://github.com/chriskalmar/entourage" target="_blank" rel="noopener noreferrer" class="repo-link">
    Git
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/entourage/readme/" class="sidebar-link">Readme</a></li><li><a href="/entourage/server/" class="active sidebar-link">Server</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/entourage/server/#profiles" class="sidebar-link">Profiles</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#graphql-api" class="sidebar-link">GraphQL API</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#setup" class="sidebar-link">Setup</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#modules" class="sidebar-link">Modules</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#broker" class="sidebar-link">Broker</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#docker-2" class="sidebar-link">Docker</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#graphql" class="sidebar-link">GraphQL</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#template" class="sidebar-link">Template</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#proxy" class="sidebar-link">Proxy</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#registry" class="sidebar-link">Registry</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#render" class="sidebar-link">Render</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#script" class="sidebar-link">Script</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#server" class="sidebar-link">Server</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#stats" class="sidebar-link">Stats</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#template-2" class="sidebar-link">Template</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#utils" class="sidebar-link">Utils</a></li><li class="sidebar-sub-header"><a href="/entourage/server/#yaml" class="sidebar-link">Yaml</a></li></ul></li><li><a href="/entourage/cli/" class="sidebar-link">CLI</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><a name="1md"></a></p> <h1 id="entourage-server"><a href="#entourage-server" class="header-anchor">#</a> entourage-server</h1> <blockquote><p>Server for environment bootstrapping</p></blockquote> <p>See repository page <a href="https://github.com/chriskalmar/entourage" target="_blank" rel="noopener noreferrer">chriskalmar/entourage<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more information.</p> <h2 id="profiles"><a href="#profiles" class="header-anchor">#</a> Profiles</h2> <p>Create a <code>profiles</code> folder that will be shared with docker container.</p> <h3 id="profile-template"><a href="#profile-template" class="header-anchor">#</a> Profile template</h3> <p>At the root of <code>profiles</code>, create a yml | yaml template like <a href="./test/demo-profile.yaml">demo-profile.yaml</a>.
You can use <code>defaults</code>-&gt;<code>params</code> to declare default params that will be used to fill out template files declared in <code>renderTemplates</code>.</p> <p>Still at the root, create a folder that will contain your templates (<code>sourcePath</code>) and another one called <code>demo-profile</code> that will contain the files rendered (<code>targetPath</code>).</p> <p>These templates will be parsed and variables will be replaced by your default params and those that will be passed to entourage-server API.</p> <div class="language- extra-class"><pre class="language-text"><code>.
+-- demo-profile
|   +-- init-db.sh *
|   +-- stop-db.sh *
|   +-- docker-compose.yaml *
|   +-- env *
+-- templates
|   +-- demo-profile.init-db.sh
|   +-- demo-profile.stop-db.sh
|   +-- demo-profile.docker-compose.yaml
|   +-- demo-profile.env
+-- demo-profile.yaml

* created after rendering
</code></pre></div><h4 id="profile-hooks"><a href="#profile-hooks" class="header-anchor">#</a> Profile hooks</h4> <ul><li><code>prepare</code></li> <li><code>beforeDestroy</code></li></ul> <p>These hooks allows you to declare a <code>script</code> that will be executed before the environment will be started / destroyed.
Optionally fill the <code>timeout</code> field that will allow the entourage-server to kill the process after duration has passed.</p> <h4 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h4> <p><code>docker</code> field allows to declare the path of your <code>composeFile</code>.</p> <h2 id="graphql-api"><a href="#graphql-api" class="header-anchor">#</a> GraphQL API</h2> <h3 id="createprofile"><a href="#createprofile" class="header-anchor">#</a> createProfile</h3> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">mutation</span> createProfile<span class="token punctuation">(</span><span class="token variable">$version</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$profile</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$params</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  initProfile<span class="token punctuation">(</span><span class="token attr-name">version</span><span class="token punctuation">:</span> <span class="token variable">$version</span><span class="token punctuation">,</span> <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token variable">$profile</span><span class="token punctuation">,</span> <span class="token attr-name">params</span><span class="token punctuation">:</span> <span class="token variable">$params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    profile
    version
    ready
    ports
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;profile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;demo-profile&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;HOST&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mqtt-api&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MQTT_PORT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1883&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;WS_PORT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3000&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="profilecreated"><a href="#profilecreated" class="header-anchor">#</a> profileCreated</h3> <div class="language-graphql extra-class"><pre class="language-graphql"><code>subscription watchProfileCreated<span class="token punctuation">(</span><span class="token variable">$version</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$profile</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  profileCreated<span class="token punctuation">(</span><span class="token attr-name">version</span><span class="token punctuation">:</span> <span class="token variable">$version</span><span class="token punctuation">,</span> <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token variable">$profile</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    profile
    version
    ports
    ready
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;profile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;demo-profile&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getprofilestats"><a href="#getprofilestats" class="header-anchor">#</a> getProfileStats</h3> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">query</span> getProfileStats<span class="token punctuation">(</span><span class="token variable">$version</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$profile</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  getProfileStats<span class="token punctuation">(</span><span class="token attr-name">version</span><span class="token punctuation">:</span> <span class="token variable">$version</span><span class="token punctuation">,</span> <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token variable">$profile</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    version
    ready
    profile
    ports
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;profile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;demo-profile&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="destroyprofile"><a href="#destroyprofile" class="header-anchor">#</a> destroyProfile</h3> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">mutation</span> destroyProfile<span class="token punctuation">(</span><span class="token variable">$version</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$profile</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$params</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  destroyProfile<span class="token punctuation">(</span><span class="token attr-name">version</span><span class="token punctuation">:</span> <span class="token variable">$version</span><span class="token punctuation">,</span> <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token variable">$profile</span><span class="token punctuation">,</span> <span class="token attr-name">params</span><span class="token punctuation">:</span> <span class="token variable">$params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    profile
    version
    ready
    ports
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;profile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;demo-profile&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;NODE_ENV&quot;</span><span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;HOST&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mqtt-api&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MQTT_PORT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1883&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;WS_PORT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3000&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="profiledestroyed"><a href="#profiledestroyed" class="header-anchor">#</a> profileDestroyed</h3> <div class="language-graphql extra-class"><pre class="language-graphql"><code>subscription watchProfileDestroyed<span class="token punctuation">(</span><span class="token variable">$version</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$profile</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  profileDestroyed<span class="token punctuation">(</span><span class="token attr-name">version</span><span class="token punctuation">:</span> <span class="token variable">$version</span><span class="token punctuation">,</span> <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token variable">$profile</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    profile
    version
    ports
    ready
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;profile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;demo-profile&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="setup"><a href="#setup" class="header-anchor">#</a> Setup</h2> <p>Run entourage server as a privileged docker container and provide a profiles folder and a work folder as volume mounts:</p> <h3 id="via-docker"><a href="#via-docker" class="header-anchor">#</a> Via docker</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run -d --name entourage <span class="token punctuation">\</span>
  -v /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>
  -v <span class="token environment constant">$PWD</span>/profiles:/app/profiles <span class="token punctuation">\</span>
  -v <span class="token environment constant">$PWD</span>/work:/app/work <span class="token punctuation">\</span>
  -p <span class="token number">5858</span>:5858 <span class="token punctuation">\</span>
  -p <span class="token number">4242</span>:4242 <span class="token punctuation">\</span>
  chriskalmar/entourage:latest
</code></pre></div><h3 id="via-docker-compose"><a href="#via-docker-compose" class="header-anchor">#</a> Via docker-compose</h3> <p>create a file named <code>docker-compose.yml</code>:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">entourage</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> chriskalmar/entourage<span class="token punctuation">:</span>latest
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /var/run/docker.sock<span class="token punctuation">:</span>/var/run/docker.sock
      <span class="token punctuation">-</span> ./profiles<span class="token punctuation">:</span>/app/profiles
      <span class="token punctuation">-</span> ./work<span class="token punctuation">:</span>/app/work
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'5858:5858'</span>
      <span class="token punctuation">-</span> <span class="token string">'4242:4242'</span>
</code></pre></div><p>and run it with:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker-compose up -d
</code></pre></div><p><a name="2md"></a></p> <h2 id="modules"><a href="#modules" class="header-anchor">#</a> Modules</h2> <dl><dt><a href="#module_Broker">Broker</a></dt> <dd></dd> <dt><a href="#module_Docker">Docker</a></dt> <dd></dd> <dt><a href="#module_GraphQL">GraphQL</a></dt> <dd></dd> <dt><a href="#module_Template">Template</a></dt> <dd></dd> <dt><a href="#module_Proxy">Proxy</a></dt> <dd></dd> <dt><a href="#module_Registry">Registry</a></dt> <dd></dd> <dt><a href="#module_Render">Render</a></dt> <dd></dd> <dt><a href="#module_Script">Script</a></dt> <dd></dd> <dt><a href="#module_Server">Server</a></dt> <dd></dd> <dt><a href="#module_Stats">Stats</a></dt> <dd></dd> <dt><a href="#module_Template">Template</a></dt> <dd></dd> <dt><a href="#module_Utils">Utils</a></dt> <dd></dd> <dt><a href="#module_Yaml">Yaml</a></dt> <dd></dd></dl> <p><a name="module_Broker"></a></p> <h2 id="broker"><a href="#broker" class="header-anchor">#</a> Broker</h2> <ul><li><a href="#module_Broker">Broker</a> <ul><li><a href="#module_Broker..initBroker">~initBroker()</a> ⇒ <code>Aedes</code></li> <li><a href="#module_Broker..Aedes">~Aedes</a></li></ul></li></ul> <p><a name="module_Broker..initBroker"></a></p> <h3 id="broker-initbroker-⇒-aedes"><a href="#broker-initbroker-⇒-aedes" class="header-anchor">#</a> Broker~initBroker() ⇒ <code>Aedes</code></h3> <p>Start MQTT broker</p> <p><strong>Kind</strong>: inner method of <a href="#module_Broker"><code>Broker</code></a><br> <a name="module_Broker..Aedes"></a></p> <h3 id="broker-aedes"><a href="#broker-aedes" class="header-anchor">#</a> Broker~Aedes</h3> <p><strong>Kind</strong>: inner typedef of <a href="#module_Broker"><code>Broker</code></a><br> <a name="module_Docker"></a></p> <h2 id="docker-2"><a href="#docker-2" class="header-anchor">#</a> Docker</h2> <ul><li><a href="#module_Docker">Docker</a> <ul><li><a href="#module_Docker..checkDockerComposeFileExists">~checkDockerComposeFileExists(filePath)</a></li> <li><a href="#module_Docker..validateDockerComposeFile">~validateDockerComposeFile(cwd, filePath)</a></li> <li><a href="#module_Docker..adjustDockerComposeFile">~adjustDockerComposeFile(workVersionFolder, filePath)</a> ⇒ <code>object</code></li> <li><a href="#module_Docker..updateDockerComposeFilesWithPorts">~updateDockerComposeFilesWithPorts(version, config, portRegistry)</a></li> <li><a href="#module_Docker..processDockerTask">~processDockerTask(version, config)</a> ⇒ <code>object</code></li> <li><a href="#module_Docker..processDockerTask">~processDockerTask(version, config)</a></li> <li><a href="#module_Docker..runDockerComposeFile">~runDockerComposeFile(cwd, filePath)</a></li> <li><a href="#module_Docker..runWorkVersionDockerComposeFile">~runWorkVersionDockerComposeFile(version, config)</a> ⇒ <code>Promise.&lt;function()&gt;</code></li> <li><a href="#module_Docker..downDockerComposeFile">~downDockerComposeFile(cwd, filePath, clean)</a></li> <li><a href="#module_Docker..downWorkVersionDockerComposeFile">~downWorkVersionDockerComposeFile(version, config, clean)</a> ⇒ <code>Promise.&lt;function()&gt;</code></li> <li><a href="#module_Docker..getDockerComposeStats">~getDockerComposeStats(cwd, filePath)</a> ⇒ <code>Promise.&lt;function()&gt;</code></li> <li><a href="#module_Docker..getWorkFolderMountSource">~getWorkFolderMountSource()</a> ⇒ <code>string</code></li></ul></li></ul> <p><a name="module_Docker..checkDockerComposeFileExists"></a></p> <h3 id="docker-checkdockercomposefileexists-filepath"><a href="#docker-checkdockercomposefileexists-filepath" class="header-anchor">#</a> Docker~checkDockerComposeFileExists(filePath)</h3> <p>Check docker-compose file presence</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Throws</strong>:</p> <ul><li>Docker compose file x not found</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>filePath</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Docker..validateDockerComposeFile"></a></p> <h3 id="docker-validatedockercomposefile-cwd-filepath"><a href="#docker-validatedockercomposefile-cwd-filepath" class="header-anchor">#</a> Docker~validateDockerComposeFile(cwd, filePath)</h3> <p>Check docker-compose file validity</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Throws</strong>:</p> <ul><li>Docker compose error</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>cwd</td> <td><code>string</code></td></tr> <tr><td>filePath</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Docker..adjustDockerComposeFile"></a></p> <h3 id="docker-adjustdockercomposefile-workversionfolder-filepath-⇒-object"><a href="#docker-adjustdockercomposefile-workversionfolder-filepath-⇒-object" class="header-anchor">#</a> Docker~adjustDockerComposeFile(workVersionFolder, filePath) ⇒ <code>object</code></h3> <p>Update docker-compose file network and ports mapping and generate portRegistry</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Returns</strong>: <code>object</code> - portRegistry<br> <strong>Throws</strong>:</p> <ul><li>At least one service needs to expose a port</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>workVersionFolder</td> <td><code>string</code></td></tr> <tr><td>filePath</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Docker..updateDockerComposeFilesWithPorts"></a></p> <h3 id="docker-updatedockercomposefileswithports-version-config-portregistry"><a href="#docker-updatedockercomposefileswithports-version-config-portregistry" class="header-anchor">#</a> Docker~updateDockerComposeFilesWithPorts(version, config, portRegistry)</h3> <p>Update docker-compose file</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>config</td> <td><code>object</code></td></tr> <tr><td>portRegistry</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Docker..processDockerTask"></a></p> <h3 id="docker-processdockertask-version-config-⇒-object"><a href="#docker-processdockertask-version-config-⇒-object" class="header-anchor">#</a> Docker~processDockerTask(version, config) ⇒ <code>object</code></h3> <p>Validate compose-file</p> <p>Convert generated port to random ports</p> <p>Update docker-compose file</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Returns</strong>: <code>object</code> - portRegistry</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>config</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Docker..processDockerTask"></a></p> <h3 id="docker-processdockertask-version-config"><a href="#docker-processdockertask-version-config" class="header-anchor">#</a> Docker~processDockerTask(version, config)</h3> <p>Pull docker-compose file sources</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Throws</strong>:</p> <ul><li>Docker compose error</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>config</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Docker..runDockerComposeFile"></a></p> <h3 id="docker-rundockercomposefile-cwd-filepath"><a href="#docker-rundockercomposefile-cwd-filepath" class="header-anchor">#</a> Docker~runDockerComposeFile(cwd, filePath)</h3> <p>Start docker-compose file</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Throws</strong>:</p> <ul><li>Docker compose error</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>cwd</td> <td><code>string</code></td></tr> <tr><td>filePath</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Docker..runWorkVersionDockerComposeFile"></a></p> <h3 id="docker-runworkversiondockercomposefile-version-config-⇒-promise-function"><a href="#docker-runworkversiondockercomposefile-version-config-⇒-promise-function" class="header-anchor">#</a> Docker~runWorkVersionDockerComposeFile(version, config) ⇒ <code>Promise.&lt;function()&gt;</code></h3> <p>Start docker-compose file from a work subfolder</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Returns</strong>: <code>Promise.&lt;function()&gt;</code> - Docker~runDockerComposeFile</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>config</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Docker..downDockerComposeFile"></a></p> <h3 id="docker-downdockercomposefile-cwd-filepath-clean"><a href="#docker-downdockercomposefile-cwd-filepath-clean" class="header-anchor">#</a> Docker~downDockerComposeFile(cwd, filePath, clean)</h3> <p>Stop docker-compose file</p> <p>Optionally clean volumes, images and orphans</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Throws</strong>:</p> <ul><li>Docker compose error</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>cwd</td> <td><code>string</code></td></tr> <tr><td>filePath</td> <td><code>string</code></td></tr> <tr><td>clean</td> <td><code>boolean</code></td></tr></tbody></table> <p><a name="module_Docker..downWorkVersionDockerComposeFile"></a></p> <h3 id="docker-downworkversiondockercomposefile-version-config-clean-⇒-promise-function"><a href="#docker-downworkversiondockercomposefile-version-config-clean-⇒-promise-function" class="header-anchor">#</a> Docker~downWorkVersionDockerComposeFile(version, config, clean) ⇒ <code>Promise.&lt;function()&gt;</code></h3> <p>Start docker-compose file from a work subfolder</p> <p>Optionally clean volumes, images and orphans</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Returns</strong>: <code>Promise.&lt;function()&gt;</code> - Docker~downDockerComposeFile</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>config</td> <td><code>object</code></td></tr> <tr><td>clean</td> <td><code>boolean</code></td></tr></tbody></table> <p><a name="module_Docker..getDockerComposeStats"></a></p> <h3 id="docker-getdockercomposestats-cwd-filepath-⇒-promise-function"><a href="#docker-getdockercomposestats-cwd-filepath-⇒-promise-function" class="header-anchor">#</a> Docker~getDockerComposeStats(cwd, filePath) ⇒ <code>Promise.&lt;function()&gt;</code></h3> <p>Get docker-compose stats</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Returns</strong>: <code>Promise.&lt;function()&gt;</code> - compose.ps<br> <strong>Throws</strong>:</p> <ul><li>Docker compose error</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>cwd</td> <td><code>string</code></td></tr> <tr><td>filePath</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Docker..getWorkFolderMountSource"></a></p> <h3 id="docker-getworkfoldermountsource-⇒-string"><a href="#docker-getworkfoldermountsource-⇒-string" class="header-anchor">#</a> Docker~getWorkFolderMountSource() ⇒ <code>string</code></h3> <p>Get docker-compose mountpoint</p> <p><strong>Kind</strong>: inner method of <a href="#module_Docker"><code>Docker</code></a><br> <strong>Throws</strong>:</p> <ul><li>Cannot detect work folder mount point. Are you running Entourage server via docker?</li></ul> <p><a name="module_GraphQL"></a></p> <h2 id="graphql"><a href="#graphql" class="header-anchor">#</a> GraphQL</h2> <ul><li><a href="#module_GraphQL">GraphQL</a> <ul><li><a href="#module_GraphQL..ProfileState">~ProfileState</a> : <code>GraphQLType</code></li> <li><a href="#module_GraphQL..Query">~Query</a> : <code>GraphQLType</code></li> <li><a href="#module_GraphQL..getProfileStats">~getProfileStats</a> ⇒ <code>GraphQLType</code></li> <li><a href="#module_GraphQL..Mutation">~Mutation</a> : <code>GraphQLType</code></li> <li><a href="#module_GraphQL..initProfile">~initProfile</a> ⇒ <code>GraphQLType</code></li> <li><a href="#module_GraphQL..destroyProfile">~destroyProfile</a> ⇒ <code>GraphQLType</code></li> <li><a href="#module_GraphQL..Subscriptions">~Subscriptions</a> : <code>GraphQLType</code></li> <li><a href="#module_GraphQL..profileCreated">~profileCreated</a> ⇒ <code>GraphQLType</code></li> <li><a href="#module_GraphQL..profileDestroyed">~profileDestroyed</a> ⇒ <code>GraphQLType</code></li></ul></li></ul> <p><a name="module_GraphQL..ProfileState"></a></p> <h3 id="graphql-profilestate-graphqltype"><a href="#graphql-profilestate-graphqltype" class="header-anchor">#</a> GraphQL~ProfileState : <code>GraphQLType</code></h3> <p><strong>Kind</strong>: inner constant of <a href="#module_GraphQL"><code>GraphQL</code></a><br> <strong>Properties</strong></p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>timestamp</td> <td><code>string</code></td></tr> <tr><td>version</td> <td><code>string</code></td></tr> <tr><td>profile</td> <td><code>string</code></td></tr> <tr><td>params</td> <td><code>object</code></td></tr> <tr><td>docker</td> <td><code>object</code></td></tr> <tr><td>ready</td> <td><code>boolean</code></td></tr> <tr><td>healthy</td> <td><code>boolean</code></td></tr> <tr><td>ports</td> <td><code>object</code></td></tr> <tr><td>stats</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_GraphQL..Query"></a></p> <h3 id="graphql-query-graphqltype"><a href="#graphql-query-graphqltype" class="header-anchor">#</a> GraphQL~Query : <code>GraphQLType</code></h3> <p><strong>Kind</strong>: inner constant of <a href="#module_GraphQL"><code>GraphQL</code></a><br> <strong>Properties</strong></p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>getProfileStats</td> <td><code>GraphQLQuery</code></td></tr></tbody></table> <p><a name="module_GraphQL..getProfileStats"></a></p> <h3 id="graphql-getprofilestats-⇒-graphqltype"><a href="#graphql-getprofilestats-⇒-graphqltype" class="header-anchor">#</a> GraphQL~getProfileStats ⇒ <code>GraphQLType</code></h3> <p><strong>Kind</strong>: inner constant of <a href="#module_GraphQL"><code>GraphQL</code></a><br> <strong>Returns</strong>: <code>GraphQLType</code> - ProfileState<br> <strong>Properties</strong></p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>profile</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_GraphQL..Mutation"></a></p> <h3 id="graphql-mutation-graphqltype"><a href="#graphql-mutation-graphqltype" class="header-anchor">#</a> GraphQL~Mutation : <code>GraphQLType</code></h3> <p><strong>Kind</strong>: inner constant of <a href="#module_GraphQL"><code>GraphQL</code></a><br> <strong>Properties</strong></p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>initProfile</td> <td><code>GraphQLMutation</code></td></tr> <tr><td>destroyProfile</td> <td><code>GraphQLMutation</code></td></tr></tbody></table> <p><a name="module_GraphQL..initProfile"></a></p> <h3 id="graphql-initprofile-⇒-graphqltype"><a href="#graphql-initprofile-⇒-graphqltype" class="header-anchor">#</a> GraphQL~initProfile ⇒ <code>GraphQLType</code></h3> <p><strong>Kind</strong>: inner constant of <a href="#module_GraphQL"><code>GraphQL</code></a><br> <strong>Returns</strong>: <code>GraphQLType</code> - ProfileState<br> <strong>Properties</strong></p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>profile</td> <td><code>string</code></td></tr> <tr><td>params</td> <td><code>object</code></td></tr> <tr><td>[asyncMode]</td> <td><code>boolean</code></td></tr></tbody></table> <p><a name="module_GraphQL..destroyProfile"></a></p> <h3 id="graphql-destroyprofile-⇒-graphqltype"><a href="#graphql-destroyprofile-⇒-graphqltype" class="header-anchor">#</a> GraphQL~destroyProfile ⇒ <code>GraphQLType</code></h3> <p><strong>Kind</strong>: inner constant of <a href="#module_GraphQL"><code>GraphQL</code></a><br> <strong>Returns</strong>: <code>GraphQLType</code> - ProfileState<br> <strong>Properties</strong></p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>profile</td> <td><code>string</code></td></tr> <tr><td>params</td> <td><code>object</code></td></tr> <tr><td>[asyncMode]</td> <td><code>boolean</code></td></tr></tbody></table> <p><a name="module_GraphQL..Subscriptions"></a></p> <h3 id="graphql-subscriptions-graphqltype"><a href="#graphql-subscriptions-graphqltype" class="header-anchor">#</a> GraphQL~Subscriptions : <code>GraphQLType</code></h3> <p><strong>Kind</strong>: inner constant of <a href="#module_GraphQL"><code>GraphQL</code></a><br> <strong>Properties</strong></p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>profileCreated</td> <td><code>GraphQLSubscription</code></td></tr> <tr><td>profileDestroyed</td> <td><code>GraphQLSubscription</code></td></tr></tbody></table> <p><a name="module_GraphQL..profileCreated"></a></p> <h3 id="graphql-profilecreated-⇒-graphqltype"><a href="#graphql-profilecreated-⇒-graphqltype" class="header-anchor">#</a> GraphQL~profileCreated ⇒ <code>GraphQLType</code></h3> <p><strong>Kind</strong>: inner constant of <a href="#module_GraphQL"><code>GraphQL</code></a><br> <strong>Returns</strong>: <code>GraphQLType</code> - ProfileState<br> <strong>Properties</strong></p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>profile</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_GraphQL..profileDestroyed"></a></p> <h3 id="graphql-profiledestroyed-⇒-graphqltype"><a href="#graphql-profiledestroyed-⇒-graphqltype" class="header-anchor">#</a> GraphQL~profileDestroyed ⇒ <code>GraphQLType</code></h3> <p><strong>Kind</strong>: inner constant of <a href="#module_GraphQL"><code>GraphQL</code></a><br> <strong>Returns</strong>: <code>GraphQLType</code> - ProfileState<br> <strong>Properties</strong></p> <table><thead><tr><th>Name</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>profile</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Template"></a></p> <h2 id="template"><a href="#template" class="header-anchor">#</a> Template</h2> <ul><li><a href="#module_Template">Template</a> <ul><li><a href="#module_Template..renderTemplate">~renderTemplate(templateFilename, templateParams)</a> ⇒ <code>function</code></li> <li><a href="#module_Template..renderTemplateToFile">~renderTemplateToFile(templateFilename, templateParams, version, outputFilename)</a></li></ul></li></ul> <p><a name="module_Template..renderTemplate"></a></p> <h3 id="template-rendertemplate-templatefilename-templateparams-⇒-function"><a href="#template-rendertemplate-templatefilename-templateparams-⇒-function" class="header-anchor">#</a> Template~renderTemplate(templateFilename, templateParams) ⇒ <code>function</code></h3> <p>Load a templateFilename and renders it from templateParams</p> <p><strong>Kind</strong>: inner method of <a href="#module_Template"><code>Template</code></a><br> <strong>Returns</strong>: <code>function</code> - Render~renderFile<br> <strong>Throws</strong>:</p> <ul><li>Template x not found</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>templateFilename</td> <td><code>string</code></td></tr> <tr><td>templateParams</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Template..renderTemplateToFile"></a></p> <h3 id="template-rendertemplatetofile-templatefilename-templateparams-version-outputfilename"><a href="#template-rendertemplatetofile-templatefilename-templateparams-version-outputfilename" class="header-anchor">#</a> Template~renderTemplateToFile(templateFilename, templateParams, version, outputFilename)</h3> <p>Load a templateFilename and renders it from templateParams,</p> <p>then save it as file in a work subfolder</p> <p><strong>Kind</strong>: inner method of <a href="#module_Template"><code>Template</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>templateFilename</td> <td><code>string</code></td></tr> <tr><td>templateParams</td> <td><code>object</code></td></tr> <tr><td>version</td> <td><code>string</code></td></tr> <tr><td>outputFilename</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Proxy"></a></p> <h2 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h2> <ul><li><a href="#module_Proxy">Proxy</a> <ul><li><a href="#module_Proxy..updateProxyConfig">~updateProxyConfig()</a></li> <li><a href="#module_Proxy..restartProxy">~restartProxy()</a></li></ul></li></ul> <p><a name="module_Proxy..updateProxyConfig"></a></p> <h3 id="proxy-updateproxyconfig"><a href="#proxy-updateproxyconfig" class="header-anchor">#</a> Proxy~updateProxyConfig()</h3> <p>Update HAproxy configuration from the registry</p> <p>Populate haproxy.cfg and haproxy.docker-compose.yaml templates</p> <p>Save them at the root of WORK_PATH</p> <p><strong>Kind</strong>: inner method of <a href="#module_Proxy"><code>Proxy</code></a><br> <a name="module_Proxy..restartProxy"></a></p> <h3 id="proxy-restartproxy"><a href="#proxy-restartproxy" class="header-anchor">#</a> Proxy~restartProxy()</h3> <p>Restart HAproxy docker container</p> <p><strong>Kind</strong>: inner method of <a href="#module_Proxy"><code>Proxy</code></a><br> <a name="module_Registry"></a></p> <h2 id="registry"><a href="#registry" class="header-anchor">#</a> Registry</h2> <ul><li><a href="#module_Registry">Registry</a> <ul><li><a href="#module_Registry..addWorkVersionConfig">~addWorkVersionConfig(config)</a></li> <li><a href="#module_Registry..getWorkVersionConfig">~getWorkVersionConfig(config)</a> ⇒ <code>object</code></li> <li><a href="#module_Registry..removeWorkVersionConfig">~removeWorkVersionConfig(config)</a></li> <li><a href="#module_Registry..initRegistry">~initRegistry()</a></li></ul></li></ul> <p><a name="module_Registry..addWorkVersionConfig"></a></p> <h3 id="registry-addworkversionconfig-config"><a href="#registry-addworkversionconfig-config" class="header-anchor">#</a> Registry~addWorkVersionConfig(config)</h3> <p>Save a profile configuration in the registry</p> <p><strong>Kind</strong>: inner method of <a href="#module_Registry"><code>Registry</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>config</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Registry..getWorkVersionConfig"></a></p> <h3 id="registry-getworkversionconfig-config-⇒-object"><a href="#registry-getworkversionconfig-config-⇒-object" class="header-anchor">#</a> Registry~getWorkVersionConfig(config) ⇒ <code>object</code></h3> <p>Find a profile configuration in the registry</p> <p><strong>Kind</strong>: inner method of <a href="#module_Registry"><code>Registry</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>config</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Registry..removeWorkVersionConfig"></a></p> <h3 id="registry-removeworkversionconfig-config"><a href="#registry-removeworkversionconfig-config" class="header-anchor">#</a> Registry~removeWorkVersionConfig(config)</h3> <p>Remove a profile configuration in the registry</p> <p><strong>Kind</strong>: inner method of <a href="#module_Registry"><code>Registry</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>config</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Registry..initRegistry"></a></p> <h3 id="registry-initregistry"><a href="#registry-initregistry" class="header-anchor">#</a> Registry~initRegistry()</h3> <p>Initialize the registry from existing work subfolder</p> <p><strong>Kind</strong>: inner method of <a href="#module_Registry"><code>Registry</code></a><br> <a name="module_Render"></a></p> <h2 id="render"><a href="#render" class="header-anchor">#</a> Render</h2> <ul><li><a href="#module_Render">Render</a> <ul><li><a href="#module_Render..render">~render(content, templateParams, escapePatterns)</a> ⇒ <code>object</code></li> <li><a href="#module_Render..renderFile">~renderFile(content, templateParams, escapePatterns)</a> ⇒ <code>function</code></li></ul></li></ul> <p><a name="module_Render..render"></a></p> <h3 id="render-render-content-templateparams-escapepatterns-⇒-object"><a href="#render-render-content-templateparams-escapepatterns-⇒-object" class="header-anchor">#</a> Render~render(content, templateParams, escapePatterns) ⇒ <code>object</code></h3> <p>Render a template file by replacing variables</p> <p><strong>Kind</strong>: inner method of <a href="#module_Render"><code>Render</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>content</td> <td><code>string</code></td></tr> <tr><td>templateParams</td> <td><code>object</code></td></tr> <tr><td>escapePatterns</td> <td><code>array</code></td></tr></tbody></table> <p><a name="module_Render..renderFile"></a></p> <h3 id="render-renderfile-content-templateparams-escapepatterns-⇒-function"><a href="#render-renderfile-content-templateparams-escapepatterns-⇒-function" class="header-anchor">#</a> Render~renderFile(content, templateParams, escapePatterns) ⇒ <code>function</code></h3> <p>Find a template file and render it by replacing variables</p> <p><strong>Kind</strong>: inner method of <a href="#module_Render"><code>Render</code></a><br> <strong>Returns</strong>: <code>function</code> - Render~render</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>content</td> <td><code>string</code></td></tr> <tr><td>templateParams</td> <td><code>object</code></td></tr> <tr><td>escapePatterns</td> <td><code>array</code></td></tr></tbody></table> <p><a name="module_Script"></a></p> <h2 id="script"><a href="#script" class="header-anchor">#</a> Script</h2> <ul><li><a href="#module_Script">Script</a> <ul><li><a href="#module_Script..executeScript">~executeScript(version, script, params, [timeout])</a> ⇒ <code>Promise.&lt;number&gt;</code></li> <li><a href="#module_Script..executeScript">~executeScript(version, scripts, params, [timeout])</a></li></ul></li></ul> <p><a name="module_Script..executeScript"></a></p> <h3 id="script-executescript-version-script-params-timeout-⇒-promise-number"><a href="#script-executescript-version-script-params-timeout-⇒-promise-number" class="header-anchor">#</a> Script~executeScript(version, script, params, [timeout]) ⇒ <code>Promise.&lt;number&gt;</code></h3> <p>Execute a bash script from a work subfolder</p> <p>Optional timeout to kill the process</p> <p><strong>Kind</strong>: inner method of <a href="#module_Script"><code>Script</code></a><br> <strong>Returns</strong>: <code>Promise.&lt;number&gt;</code> - exitCode<br> <strong>Throws</strong>:</p> <ul><li>Script timed out: x.</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>script</td> <td><code>string</code></td></tr> <tr><td>params</td> <td><code>string</code></td></tr> <tr><td>[timeout]</td> <td><code>number</code></td></tr></tbody></table> <p><a name="module_Script..executeScript"></a></p> <h3 id="script-executescript-version-scripts-params-timeout"><a href="#script-executescript-version-scripts-params-timeout" class="header-anchor">#</a> Script~executeScript(version, scripts, params, [timeout])</h3> <p>Execute a series of bash scripts from a work subfolder</p> <p>Optional timeout to kill the process</p> <p><strong>Kind</strong>: inner method of <a href="#module_Script"><code>Script</code></a><br> <strong>Throws</strong>:</p> <ul><li>Script execution failed with exit code x.</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>scripts</td> <td><code>object</code></td></tr> <tr><td>params</td> <td><code>string</code></td></tr> <tr><td>[timeout]</td> <td><code>number</code></td></tr></tbody></table> <p><a name="module_Server"></a></p> <h2 id="server"><a href="#server" class="header-anchor">#</a> Server</h2> <ul><li><a href="#module_Server">Server</a> <ul><li><a href="#module_Server..initServer">~initServer()</a> ⇒ <code>GraphQLServer</code></li> <li><a href="#module_Server..GraphQLServer">~GraphQLServer</a></li></ul></li></ul> <p><a name="module_Server..initServer"></a></p> <h3 id="server-initserver-⇒-graphqlserver"><a href="#server-initserver-⇒-graphqlserver" class="header-anchor">#</a> Server~initServer() ⇒ <code>GraphQLServer</code></h3> <p>Start GraphQL HTTP/WS server</p> <p><strong>Kind</strong>: inner method of <a href="#module_Server"><code>Server</code></a><br> <a name="module_Server..GraphQLServer"></a></p> <h3 id="server-graphqlserver"><a href="#server-graphqlserver" class="header-anchor">#</a> Server~GraphQLServer</h3> <p><strong>Kind</strong>: inner typedef of <a href="#module_Server"><code>Server</code></a><br> <a name="module_Stats"></a></p> <h2 id="stats"><a href="#stats" class="header-anchor">#</a> Stats</h2> <ul><li><a href="#module_Stats">Stats</a> <ul><li><a href="#module_Stats..getProfileConfig">~getProfileConfig(profile, version)</a> ⇒ <code>Promise.&lt;object&gt;</code></li> <li><a href="#module_Stats..getProfileStats">~getProfileStats(profile, version)</a> ⇒ <code>Promise.&lt;object&gt;</code></li></ul></li></ul> <p><a name="module_Stats..getProfileConfig"></a></p> <h3 id="stats-getprofileconfig-profile-version-⇒-promise-object"><a href="#stats-getprofileconfig-profile-version-⇒-promise-object" class="header-anchor">#</a> Stats~getProfileConfig(profile, version) ⇒ <code>Promise.&lt;object&gt;</code></h3> <p>Retrieve a profile config from the registry</p> <p><strong>Kind</strong>: inner method of <a href="#module_Stats"><code>Stats</code></a><br> <strong>Throws</strong>:</p> <ul><li>Unknown profile</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>profile</td> <td><code>string</code></td></tr> <tr><td>version</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Stats..getProfileStats"></a></p> <h3 id="stats-getprofilestats-profile-version-⇒-promise-object"><a href="#stats-getprofilestats-profile-version-⇒-promise-object" class="header-anchor">#</a> Stats~getProfileStats(profile, version) ⇒ <code>Promise.&lt;object&gt;</code></h3> <p>Retrieve profile stats from docker compose</p> <p><strong>Kind</strong>: inner method of <a href="#module_Stats"><code>Stats</code></a><br> <strong>Throws</strong>:</p> <ul><li>Unknown profile</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>profile</td> <td><code>string</code></td></tr> <tr><td>version</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Template"></a></p> <h2 id="template-2"><a href="#template-2" class="header-anchor">#</a> Template</h2> <ul><li><a href="#module_Template">Template</a> <ul><li><a href="#module_Template..renderTemplate">~renderTemplate(templateFilename, templateParams)</a> ⇒ <code>function</code></li> <li><a href="#module_Template..renderTemplateToFile">~renderTemplateToFile(templateFilename, templateParams, version, outputFilename)</a></li></ul></li></ul> <p><a name="module_Template..renderTemplate"></a></p> <h3 id="template-rendertemplate-templatefilename-templateparams-⇒-function-2"><a href="#template-rendertemplate-templatefilename-templateparams-⇒-function-2" class="header-anchor">#</a> Template~renderTemplate(templateFilename, templateParams) ⇒ <code>function</code></h3> <p>Load a templateFilename and renders it from templateParams</p> <p><strong>Kind</strong>: inner method of <a href="#module_Template"><code>Template</code></a><br> <strong>Returns</strong>: <code>function</code> - Render~renderFile<br> <strong>Throws</strong>:</p> <ul><li>Template x not found</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>templateFilename</td> <td><code>string</code></td></tr> <tr><td>templateParams</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Template..renderTemplateToFile"></a></p> <h3 id="template-rendertemplatetofile-templatefilename-templateparams-version-outputfilename-2"><a href="#template-rendertemplatetofile-templatefilename-templateparams-version-outputfilename-2" class="header-anchor">#</a> Template~renderTemplateToFile(templateFilename, templateParams, version, outputFilename)</h3> <p>Load a templateFilename and renders it from templateParams,</p> <p>then save it as file in a work subfolder</p> <p><strong>Kind</strong>: inner method of <a href="#module_Template"><code>Template</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>templateFilename</td> <td><code>string</code></td></tr> <tr><td>templateParams</td> <td><code>object</code></td></tr> <tr><td>version</td> <td><code>string</code></td></tr> <tr><td>outputFilename</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Utils"></a></p> <h2 id="utils"><a href="#utils" class="header-anchor">#</a> Utils</h2> <ul><li><a href="#module_Utils">Utils</a> <ul><li><a href="#module_Utils..log">~log(msg)</a> ⇒ <code>function</code></li> <li><a href="#module_Utils..createWorkPathFolder">~createWorkPathFolder(version)</a></li> <li><a href="#module_Utils..getWorkVersionFolder">~getWorkVersionFolder(version)</a> ⇒ <code>function</code></li> <li><a href="#module_Utils..checkVersionPathBreakout">~checkVersionPathBreakout(version)</a></li> <li><a href="#module_Utils..writeFileSync">~writeFileSync(filename, content)</a> ⇒ <code>function</code></li> <li><a href="#module_Utils..deleteWorkVersionFolder">~deleteWorkVersionFolder(version)</a></li> <li><a href="#module_Utils..createOrResetWorkVersionFolder">~createOrResetWorkVersionFolder(version)</a></li> <li><a href="#module_Utils..createOrResetWorkVersionFolder">~createOrResetWorkVersionFolder(task)</a> ⇒ <code>function</code></li> <li><a href="#module_Utils..getRandomPort">~getRandomPort(minPort, maxPort)</a> ⇒ <code>Promise.&lt;function()&gt;</code></li> <li><a href="#module_Utils..getRandomPorts">~getRandomPorts(count, minPort, maxPort, exclude)</a> ⇒ <code>Promise.&lt;array&gt;</code></li> <li><a href="#module_Utils..storeWorkVersionConfig">~storeWorkVersionConfig(version, config)</a> ⇒ <code>Promise.&lt;function()&gt;</code></li></ul></li></ul> <p><a name="module_Utils..log"></a></p> <h3 id="utils-log-msg-⇒-function"><a href="#utils-log-msg-⇒-function" class="header-anchor">#</a> Utils~log(msg) ⇒ <code>function</code></h3> <p>Log a message</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a><br> <strong>Returns</strong>: <code>function</code> - console.log</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>msg</td> <td><code>any</code></td></tr></tbody></table> <p><a name="module_Utils..createWorkPathFolder"></a></p> <h3 id="utils-createworkpathfolder-version"><a href="#utils-createworkpathfolder-version" class="header-anchor">#</a> Utils~createWorkPathFolder(version)</h3> <p>Create a work folder from WORK_PATH environement variable</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Utils..getWorkVersionFolder"></a></p> <h3 id="utils-getworkversionfolder-version-⇒-function"><a href="#utils-getworkversionfolder-version-⇒-function" class="header-anchor">#</a> Utils~getWorkVersionFolder(version) ⇒ <code>function</code></h3> <p>Get a work sub folder name from the version and WORK_PATH environement variable</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a><br> <strong>Returns</strong>: <code>function</code> - path.normalize</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Utils..checkVersionPathBreakout"></a></p> <h3 id="utils-checkversionpathbreakout-version"><a href="#utils-checkversionpathbreakout-version" class="header-anchor">#</a> Utils~checkVersionPathBreakout(version)</h3> <p>Check that a work sub folder name is disposed under WORK_PATH</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a><br> <strong>Throws</strong>:</p> <ul><li>Version x needs to be a child of WORK_PATH</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Utils..writeFileSync"></a></p> <h3 id="utils-writefilesync-filename-content-⇒-function"><a href="#utils-writefilesync-filename-content-⇒-function" class="header-anchor">#</a> Utils~writeFileSync(filename, content) ⇒ <code>function</code></h3> <p>Write a file</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a><br> <strong>Returns</strong>: <code>function</code> - fs.writeFileSync</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>filename</td> <td><code>string</code></td></tr> <tr><td>content</td> <td><code>any</code></td></tr></tbody></table> <p><a name="module_Utils..deleteWorkVersionFolder"></a></p> <h3 id="utils-deleteworkversionfolder-version"><a href="#utils-deleteworkversionfolder-version" class="header-anchor">#</a> Utils~deleteWorkVersionFolder(version)</h3> <p>Delete a work sub folder by version</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a></p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Utils..createOrResetWorkVersionFolder"></a></p> <h3 id="utils-createorresetworkversionfolder-version"><a href="#utils-createorresetworkversionfolder-version" class="header-anchor">#</a> Utils~createOrResetWorkVersionFolder(version)</h3> <p>Create or reset a work sub folder by version</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a><br> <strong>Throws</strong>:</p> <ul><li>Version x is already in use</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Utils..createOrResetWorkVersionFolder"></a></p> <h3 id="utils-createorresetworkversionfolder-task-⇒-function"><a href="#utils-createorresetworkversionfolder-task-⇒-function" class="header-anchor">#</a> Utils~createOrResetWorkVersionFolder(task) ⇒ <code>function</code></h3> <p>Log a task</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a><br> <strong>Returns</strong>: <code>function</code> - Utils~log</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>task</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Utils..getRandomPort"></a></p> <h3 id="utils-getrandomport-minport-maxport-⇒-promise-function"><a href="#utils-getrandomport-minport-maxport-⇒-promise-function" class="header-anchor">#</a> Utils~getRandomPort(minPort, maxPort) ⇒ <code>Promise.&lt;function()&gt;</code></h3> <p>Generate a random port within a declared range</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a><br> <strong>Returns</strong>: <code>Promise.&lt;function()&gt;</code> - portfinder.getPortPromise</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>minPort</td> <td><code>number</code></td></tr> <tr><td>maxPort</td> <td><code>number</code></td></tr></tbody></table> <p><a name="module_Utils..getRandomPorts"></a></p> <h3 id="utils-getrandomports-count-minport-maxport-exclude-⇒-promise-array"><a href="#utils-getrandomports-count-minport-maxport-exclude-⇒-promise-array" class="header-anchor">#</a> Utils~getRandomPorts(count, minPort, maxPort, exclude) ⇒ <code>Promise.&lt;array&gt;</code></h3> <p>Generate an array of <code>count</code> random ports within a declared range</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a><br> <strong>Throws</strong>:</p> <ul><li>Too many tries to find an open port</li></ul> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>count</td> <td><code>number</code></td></tr> <tr><td>minPort</td> <td><code>number</code></td></tr> <tr><td>maxPort</td> <td><code>number</code></td></tr> <tr><td>exclude</td> <td><code>Array.&lt;number&gt;</code></td></tr></tbody></table> <p><a name="module_Utils..storeWorkVersionConfig"></a></p> <h3 id="utils-storeworkversionconfig-version-config-⇒-promise-function"><a href="#utils-storeworkversionconfig-version-config-⇒-promise-function" class="header-anchor">#</a> Utils~storeWorkVersionConfig(version, config) ⇒ <code>Promise.&lt;function()&gt;</code></h3> <p>Write profile configuration into the work folder</p> <p><strong>Kind</strong>: inner method of <a href="#module_Utils"><code>Utils</code></a><br> <strong>Returns</strong>: <code>Promise.&lt;function()&gt;</code> - Utils~writeFileSync</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>version</td> <td><code>string</code></td></tr> <tr><td>config</td> <td><code>object</code></td></tr></tbody></table> <p><a name="module_Yaml"></a></p> <h2 id="yaml"><a href="#yaml" class="header-anchor">#</a> Yaml</h2> <ul><li><a href="#module_Yaml">Yaml</a> <ul><li><a href="#module_Yaml..parseYaml">~parseYaml(content)</a> ⇒ <code>function</code></li> <li><a href="#module_Yaml..parseYamlFile">~parseYamlFile(filePath)</a> ⇒ <code>function</code></li> <li><a href="#module_Yaml..serializeYaml">~serializeYaml(content)</a> ⇒ <code>function</code></li> <li><a href="#module_Yaml..serializeYamlFile">~serializeYamlFile(content, filePath)</a> ⇒ <code>function</code></li></ul></li></ul> <p><a name="module_Yaml..parseYaml"></a></p> <h3 id="yaml-parseyaml-content-⇒-function"><a href="#yaml-parseyaml-content-⇒-function" class="header-anchor">#</a> Yaml~parseYaml(content) ⇒ <code>function</code></h3> <p>Parse a yaml file content</p> <p><strong>Kind</strong>: inner method of <a href="#module_Yaml"><code>Yaml</code></a><br> <strong>Returns</strong>: <code>function</code> - yaml.safeLoad</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>content</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Yaml..parseYamlFile"></a></p> <h3 id="yaml-parseyamlfile-filepath-⇒-function"><a href="#yaml-parseyamlfile-filepath-⇒-function" class="header-anchor">#</a> Yaml~parseYamlFile(filePath) ⇒ <code>function</code></h3> <p>Parse a yaml file</p> <p><strong>Kind</strong>: inner method of <a href="#module_Yaml"><code>Yaml</code></a><br> <strong>Returns</strong>: <code>function</code> - Yaml~parseYaml</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>filePath</td> <td><code>string</code></td></tr></tbody></table> <p><a name="module_Yaml..serializeYaml"></a></p> <h3 id="yaml-serializeyaml-content-⇒-function"><a href="#yaml-serializeyaml-content-⇒-function" class="header-anchor">#</a> Yaml~serializeYaml(content) ⇒ <code>function</code></h3> <p>Serialize some content to yaml format</p> <p><strong>Kind</strong>: inner method of <a href="#module_Yaml"><code>Yaml</code></a><br> <strong>Returns</strong>: <code>function</code> - yaml.safeDump</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>content</td> <td><code>any</code></td></tr></tbody></table> <p><a name="module_Yaml..serializeYamlFile"></a></p> <h3 id="yaml-serializeyamlfile-content-filepath-⇒-function"><a href="#yaml-serializeyamlfile-content-filepath-⇒-function" class="header-anchor">#</a> Yaml~serializeYamlFile(content, filePath) ⇒ <code>function</code></h3> <p>Serialize some content to yaml format and save it as a file</p> <p><strong>Kind</strong>: inner method of <a href="#module_Yaml"><code>Yaml</code></a><br> <strong>Returns</strong>: <code>function</code> - fs.writeFileSync</p> <table><thead><tr><th>Param</th> <th>Type</th></tr></thead> <tbody><tr><td>content</td> <td><code>any</code></td></tr> <tr><td>filePath</td> <td><code>string</code></td></tr></tbody></table> <p><a name="readmemd"></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/entourage/readme/" class="prev">
        Readme
      </a></span> <span class="next"><a href="/entourage/cli/">
        CLI
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/entourage/assets/js/app.4735b54c.js" defer></script><script src="/entourage/assets/js/2.a00bb63a.js" defer></script><script src="/entourage/assets/js/8.db8de4f1.js" defer></script>
  </body>
</html>
